#!/usr/bin/env bash

# are we in a git repository?
git rev-parse --is-inside-work-tree &>/dev/null
if [[ $? != 0 ]]; then
  echo "Error:Not a git repository." 1>&2
  exit 1
fi

#confierm working directory
if [ -z "$(git status --porcelain)" ]; then
  # Working directory clean
  echo "Error:Working directory is clean" 1>&2
  exit 1
fi

#instant commit is Now
git status
git add -A

#do you instant commit?
echo "do you instant commit? y/n: "
read -n 1 key
if ! [ $key="y" ]; then
    exit 1
fi

git commit -m "instant commit"

#do you instant push?
read -n 1 key
echo "do you instant push for origin master ?: "
if ! [ $key="y" ]; then
    exit 1
fi

git push origin master
